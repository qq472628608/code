function link(e){window.location.href=e+"?id="+userId}function sendAjax(e,a,t,i){var l=new XMLHttpRequest;l.open(e,a,!0),l.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),l.onreadystatechange=function(){4==l.readyState&&200==l.status?i&&i.call(this,l.responseText):4==l.readyState&&200!=l.status&&(window.location.href="404.html")},t?l.send(t):l.send()}function createArticle(e){var a=JSON.parse(e);if(a.length>0)for(var t=a.length-1;t>=0;t--){var i=document.createElement("div");i.className="article",i.innerHTML='<input type="hidden" name="id" value="'+a[t].id+'"><div class="article_image"><a class="a_article" href="article.html?id='+a[t].id+'"><img class="image" src="'+a[t].image+'"></a></div><div class="article_summary"><a class="title" href="article.html?id='+a[t].id+'">'+a[t].title+'</a><a class="author" href="pinfo.html?id=1">Posted by：fan jia wei</a><p class="summary">'+a[t].summary+'</p><a class="more" href="article.html?id='+a[t].id+'">View More</a><div class="tag"><ul class="tag_ul"><li class="tag_li"><a class="tag_a1" href="javascript:void(0);"><i class="'+a[t].tag1+'"></i>&nbsp;收藏</a></li><li class="tag_li"><a class="tag_a2" href="javascript:void(0);"><i class="fa fa-heart-o"></i>&nbsp;<span>'+a[t].love+'</span>&nbsp;喜欢</a></li><li class="tag_li"><a class="tag_a3" href="article.html#comment?id='+a[t].id+'"><i class="fa fa-comments-o"></i>&nbsp;评论</a></li></ul></div>',left_list.appendChild(i)}}function getArticle(e,a){for(var t=1;t<=a;t++)e=e.parentNode;return e}var url=window.location.search,userId=url.substring(url.lastIndexOf("=")+1,url.length);document.querySelector(".link_logo_container img").onclick=function(){window.location.href="index.html"};var left_list=document.querySelector(".left_list");sendAjax("get","/getUserArticles?id="+userId,null,function(){if(arguments[0]){createArticle(arguments[0]);var e=document.querySelectorAll(".tag_a1");if(null!=e)for(var a in e)e[a].onclick=function(){var e=this;if(userId){var a=getArticle(this,5).querySelector("input[name='id']").value,t=this.querySelector("i").className,i="userid="+userId+"&articleid="+a;"fa fa-tags"==t?sendAjax("post","/collect",i,function(){e.querySelector("i").className="fa fa-star"}):sendAjax("post","/removeCollection",i,function(){e.querySelector("i").className="fa fa-tags"})}else alert("请登录"),window.location.href="index.html"};var t=document.querySelectorAll(".tag_a2");if(null!=t)for(var a in t)t[a].onclick=function(){var e=this,a=getArticle(this,5).querySelector("input[name='id']").value,t=this.querySelector("i");if("fa fa-heart-o"==t.className){var i="isAdd=true&id="+a;sendAjax("post","/love",i,function(){arguments[0]&&(e.querySelector("span").innerHTML=arguments[0],e.querySelector("i").className="fa fa-heart")})}else{i="isAdd=false&id="+a;sendAjax("post","/love",i,function(){arguments[0]&&(e.querySelector("span").innerHTML=arguments[0],e.querySelector("i").className="fa fa-heart-o")})}}}});