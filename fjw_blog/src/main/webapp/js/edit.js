function sendAjax(e,t,n){var a=new XMLHttpRequest;a.open("post",e,!0),a.onreadystatechange=function(){4==a.readyState&&200==a.status&&n&&n.call(this,a.responseText)},a.send(t)}function sendComAjax(e,t,n,a){var o=new XMLHttpRequest;o.open(e,t,!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.onreadystatechange=function(){4==o.readyState&&200==o.status?a&&a.call(this,o.responseText):4==o.readyState&&200!=o.status&&(window.location.href="404.html")},n?o.send(n):o.send()}var file,E=window.wangEditor,editor=new E("#div1","#div2");editor.customConfig.uploadImgServer="/uploadMyFile",editor.customConfig.uploadFileName="file",editor.customConfig.uploadImgHooks={customInsert:function(e,t,n){var a=t.data;e(a)}},editor.create(),sendComAjax("get","/getArticle",null,function(){if(arguments[0]){var e=JSON.parse(arguments[0]);document.querySelector("input[name='id']").value=e.id,document.querySelector("input[name='title']").value=e.title,document.querySelector("select").value=e.kind.sn,document.querySelector("#summary textarea").value=e.summary,editor.cmd.do("insertHTML",e.text)}}),document.querySelector("input[name='image']").onchange=function(){file=this.files[0]},document.querySelector("button").onclick=function(){var e=new FormData,t=document.querySelector("input[name='id']").value,n=document.querySelector("input[name='title']").value,a=document.querySelector("select").value,o=document.querySelector("#summary textarea").value,u=editor.txt.html();e.append("file",file),e.append("title",n),e.append("kindSn",a),e.append("summary",o),e.append("text",u),t&&e.append("articleid",t),sendAjax("/saveArticle",e,function(){alert("success")})};